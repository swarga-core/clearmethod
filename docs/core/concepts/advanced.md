# –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ClearMethod

> **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**

---

## –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π (Events)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–µ–∂–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

**–§–∏–ª–æ—Å–æ—Ñ–∏—è**: –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å (loose coupling). –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ, –Ω–æ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ Implemented (basic-events –ø–∞–∫–µ—Ç)

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Å–æ–±—ã—Ç–∏—è?

**–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ —Å–æ–±—ã—Ç–∏–π**:
```yaml
# workflow –∑–Ω–∞–µ—Ç –æ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–∞—Ö - –∂–µ—Å—Ç–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
- VCS.create_branch(...)      # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç git-vcs
- QA.check_quality(...)       # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç qa-gates  
- NOTIFIER.send_slack(...)    # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç notifications
```

**–†–µ—à–µ–Ω–∏–µ —Å —Å–æ–±—ã—Ç–∏—è–º–∏**:
```yaml
# workflow —ç–º–∏—Ç–∏—Ç —Å–æ–±—ã—Ç–∏–µ - —Å–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
- EVENT.emit("task.created", {task_id: "FEAT-001"})

# –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è:
# git-vcs ‚Üí —Å–ª—É—à–∞–µ—Ç task.created ‚Üí —Å–æ–∑–¥–∞–µ—Ç –≤–µ—Ç–∫—É
# qa-gates ‚Üí —Å–ª—É—à–∞–µ—Ç task.created ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç checklist
# notifications ‚Üí —Å–ª—É—à–∞–µ—Ç task.created ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–≠–º–∏—Å—Å–∏—è —Å–æ–±—ã—Ç–∏–π** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–∞–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö
‚úÖ **–ü–æ–¥–ø–∏—Å–∫–∏** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è
‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - —É—Å–ª–æ–≤–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã** - –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚úÖ **–ö–∞—Å–∫–∞–¥—ã** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —ç–º–∏—Ç–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
‚úÖ **–ò—Å—Ç–æ—Ä–∏—è** - –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```yaml
# Workflow state —ç–º–∏—Ç–∏—Ç —Å–æ–±—ã—Ç–∏–µ
- EVENT.emit("task.stage_completed", {
    task_id: "FEAT-001",
    stage: "designing"
  })

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è:
# 1. qa-gates (priority: 5) ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ
# 2. git-vcs (priority: 20) ‚Üí –∫–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
# 3. notifications (priority: 100) ‚Üí —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É
```

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

- `task.*` - –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–¥–∞—á–∏ (created, updated, state_changed)
- `workflow.*` - —Å–æ–±—ã—Ç–∏—è workflow (stage_started, stage_completed)
- `quality.*` - –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (gate_passed, gate_failed)
- `vcs.*` - –æ–ø–µ—Ä–∞—Ü–∏–∏ VCS (branch_created, commit_created, pr_created)
- `context.*` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (loaded, updated)

**–î–µ—Ç–∞–ª–∏**: –°–º. [events.md](events.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π

---

## –ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã (Sub-workflows)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö workflow.

**–§–∏–ª–æ—Å–æ—Ñ–∏—è**: –ö–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ - –≤—ã–Ω–æ—Å–∏–º –æ–±—â—É—é –ª–æ–≥–∏–∫—É, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–¥–µ –Ω—É–∂–Ω–æ.

**–°—Ç–∞—Ç—É—Å**: Planned feature (–ø–æ—Å–ª–µ MVP)

### –ú–µ—Ö–∞–Ω–∏–∫–∞ - inline —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ

```yaml
# –¢–∏–ø–æ–≤–æ–π –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å
# workflows/common/code-review.yml
nodes:
  - status: review_start
    execute: [...]
  - status: review_checks
    execute: [...]
  - status: review_approval
    execute: [...]

# Feature workflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å
# workflows/feature.yml
nodes:
  - status: implementing
  - status: code_review
    type: subprocess
    workflow: common/code-review
    # ‚Üì –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ —Ç—Ä–∏ –Ω–æ–¥—ã:
    # review_start ‚Üí review_checks ‚Üí review_approval
  - status: deploying
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ê–≥–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç workflow, –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –Ω–æ–¥—É —Ç–∏–ø–∞ `subprocess`
2. –ß–∏—Ç–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π sub-workflow —Ñ–∞–π–ª
3. **–ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞** - –∑–∞–º–µ–Ω—è–µ—Ç –Ω–æ–¥—É –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ–¥ –∏–∑ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞
4. –ó–∞–¥–∞—á–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –≤—Å–µ –Ω–æ–¥—ã –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞
5. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å

### –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```yaml
- status: code_review
  type: subprocess
  workflow: common/code-review
  params:
    strict_mode: true
    required_approvers: 2
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–∞ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º –≤ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å:
```yaml
# –í–Ω—É—Ç—Ä–∏ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
preconditions:
  - TASK.get_property("strict_mode") == true
```

### –¢–∏–ø–æ–≤—ã–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã

–ü—Ä–∏–º–µ—Ä—ã —á–∞—Å—Ç–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

1. **Code Review** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
2. **Testing** - –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
3. **Security Scan** - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
4. **Documentation Update** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
5. **Deployment** - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ DSL (Domain-Specific Languages)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—ã–±–æ—Ä —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –æ–ø–∏—Å–∞–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ –ø–æ –≤–∫—É—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–§–∏–ª–æ—Å–æ—Ñ–∏—è**: –ú–µ—Ç–æ–¥—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º –≤–∏–¥–µ, DSL - —ç—Ç–æ —Å–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

**–°—Ç–∞—Ç—É—Å**: 
- MVP - YAML-based DSL
- Planned - C-like –∏ Natural language DSL

### –í–∞—Ä–∏–∞–Ω—Ç—ã DSL

#### 1. YAML-based (–¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π) - –¥–ª—è MVP

```yaml
execute:
  - let: folder = "<PROJECT_ROOT>/tasks/<task_id>"
  - do: "Create folder at {folder}"
  - if: file_exists("{folder}/status.yml")
    then:
      - error: "Task already exists"
  - do: TASK.log("Created")
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏ ClearMethod)
- –õ–µ–≥–∫–æ –ø–∞—Ä—Å–∏—Ç—å –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
- –ü—Ä–∏–≤—ã—á–µ–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
- –•–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ—Ç—Å—è –ò–ò

#### 2. C-like (–∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π) - planned

```c
execute() {
  let folder = "<PROJECT_ROOT>/tasks/<task_id>";
  createFolder(folder);
  if (file_exists(folder + "/status.yml")) {
    error("Task already exists");
  }
  TASK.log("Created");
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ó–Ω–∞–∫–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞–º
- –ö–æ–º–ø–∞–∫—Ç–Ω–µ–µ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã

#### 3. Natural language (—Ä–æ–¥–Ω–æ–π —è–∑—ã–∫) - planned

```markdown
–í—ã–ø–æ–ª–Ω–∏—Ç—å:
  - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞–ø–∫—É –∑–∞–¥–∞—á–∏ –∫–∞–∫ <PROJECT_ROOT>/tasks/<task_id>
  - –°–æ–∑–¥–∞—Ç—å —ç—Ç—É –ø–∞–ø–∫—É
  - –ï—Å–ª–∏ —Ñ–∞–π–ª status.yml —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
    - –°–æ–æ–±—â–∏—Ç—å –æ–± –æ—à–∏–±–∫–µ "–ó–∞–¥–∞—á–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
  - –ó–∞–ø–∏—Å–∞—Ç—å –≤ –∂—É—Ä–Ω–∞–ª "–°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ –∑–∞–¥–∞—á–∏"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–µ–Ω –Ω–µ–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞–º
- –ò–ò –ª–µ–≥–∫–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö DSL

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Abstract Method     ‚îÇ  ‚Üê –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –æ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
‚îÇ Representation      ‚îÇ     –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
‚îÇ  (AST/IR)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚Üì             ‚Üì          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ YAML   ‚îÇ  ‚îÇ C-like   ‚îÇ  ‚îÇ Natural‚îÇ
‚îÇ Render ‚îÇ  ‚îÇ Render   ‚îÇ  ‚îÇ Render ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ

–ú–µ—Ç–æ–¥—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–º –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ DSL:

```yaml
# method.meta.yml - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
method: TASK.create
abstract_steps:
  - step_type: declare_variable
    var_name: folder
    var_value: "<PROJECT_ROOT>/tasks/<task_id>"
  
  - step_type: create_folder
    path: "{folder}"
  
  - step_type: conditional
    condition:
      function: file_exists
      args: ["{folder}/status.yml"]
    then:
      - step_type: error
        message: "Task already exists"
  
  - step_type: call_method
    target: TASK
    method: log
    args: ["Created task folder"]
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è DSL

```bash
# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π DSL –∏–∑ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
cm generate-method task.create --dsl=yaml > task.create.yml
cm generate-method task.create --dsl=c-like > task.create.c
cm generate-method task.create --dsl=natural-ru > task.create.md
```

**–î–ª—è MVP**: –†–∞–±–æ—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ —Å YAML DSL. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Å–æ–∑–¥–∞–µ–º.

---

## –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π (Events)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∑–∞–¥–∞—á–∏ –∏ workflow.

**–§–∏–ª–æ—Å–æ—Ñ–∏—è**: –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥–µ–π—Å—Ç–≤–∏–π.

**–°—Ç–∞—Ç—É—Å**: Planned feature (–Ω–µ –¥–ª—è MVP)

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

#### 1. –°–æ–±—ã—Ç–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

```yaml
# –ë—É–¥—É—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å - –≤ —Ñ–∞–π–ª–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
status: implementing
events:
  on_enter:
    - do: KANBAN.move(task_id, "in_progress")
    - do: NOTIFICATION.send("Started implementation")
  
  on_exit:
    - do: TASK.log("Completed implementation")
    - do: METRICS.track("implementation_duration", duration)
```

#### 2. –°–æ–±—ã—Ç–∏—è –∑–∞–¥–∞—á–∏

```yaml
# –í workflow.yml –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–º config
task_events:
  on_create:
    - do: NOTIFICATION.send("New task {task_id}")
    - do: VCS.create_branch("task/{task_id}")
  
  on_complete:
    - do: METRICS.track("completion_time")
    - do: KANBAN.move(task_id, "done")
    - do: NOTIFICATION.send("Task {task_id} completed!")
```

#### 3. –°–æ–±—ã—Ç–∏—è –æ—à–∏–±–æ–∫

```yaml
error_events:
  on_error:
    - do: VCS.revert()
    - do: NOTIFICATION.send("Error in {state}: {error_message}")
    - do: TASK.set_property("error_count", increment)
  
  on_postcondition_fail:
    - do: TASK.log("Postcondition failed: {condition}")
    - do: NOTIFICATION.send("Quality gate not passed")
```

#### 4. –£—Å–ª–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

```yaml
property_events:
  - property: priority
    on_change:
      condition: new_value == "critical"
      actions:
        - do: NOTIFICATION.send("üî• Critical priority task!")
        - do: TASK.set_property("urgent", true)
  
  - property: blocked
    on_change:
      condition: new_value == true
      actions:
        - do: KANBAN.move(task_id, "blocked")
        - do: NOTIFICATION.send("Task blocked: {task_id}")
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å workflow

–°–æ–±—ã—Ç–∏—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö:

```yaml
# 1. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–≤ config.yml)
global_events:
  on_task_create: [...]
  on_task_complete: [...]

# 2. –°–æ–±—ã—Ç–∏—è workflow (–≤ workflow.yml)
workflow_events:
  on_start: [...]
  on_finalize: [...]

# 3. –°–æ–±—ã—Ç–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (–≤ state.yml)
state_events:
  on_enter: [...]
  on_exit: [...]

# 4. –°–æ–±—ã—Ç–∏—è –º–µ—Ç–æ–¥–∞ (–≤ method.yml)
method_events:
  on_error: [...]
  on_success: [...]
```

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –Ω–∞ –æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ:

```yaml
events:
  on_state_enter:
    - priority: 100  # –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
      do: "Critical action"
    - priority: 50   # –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ç–æ—Ä—ã–º
      do: "Normal action"
    - priority: 10   # –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º
      do: "Logging action"
```

---

## –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤.

**–°—Ç–∞—Ç—É—Å**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å MVP

### –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è

–ú–µ—Ç–æ–¥ –∫–æ–Ω—Ü–µ–ø—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã —Ç–æ–≥–æ –∂–µ –∫–æ–Ω—Ü–µ–ø—Ç–∞:

```yaml
# TASK.create() –≤—ã–∑—ã–≤–∞–µ—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
method: create
execute:
  - do: TASK.initialize_folder(task_id)
  - do: TASK.create_status_file(task_id, workflow_id)
  - do: TASK.create_artifacts(task_id)
  - do: TASK.log(task_id, "Task created")

# –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
method: initialize_folder
parameters:
  - name: task_id
execute:
  - let: folder = ".cm/tasks/{task_id}"
  - do: "Create folder {folder}"
  - do: "Set folder permissions"
```

### –ú–µ–∂–∫–æ–Ω—Ü–µ–ø—Ç–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è

–ú–µ—Ç–æ–¥—ã –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ü–µ–ø—Ç–∞ –≤—ã–∑—ã–≤–∞—é—Ç –º–µ—Ç–æ–¥—ã –¥—Ä—É–≥–∏—Ö:

```yaml
# WORKFLOW.start() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TASK –∏ KANBAN
method: start
execute:
  - do: TASK.create(task_id, workflow_id, ...)
  - do: TASK.set_state(task_id, start_state)
  - do: KANBAN.move(task_id, "in_progress")
  - do: VCS.create_branch("task/{task_id}")
```

### –†–µ–∫—É—Ä—Å–∏—è

–ú–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Å–µ–±—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ (—Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é):

```yaml
method: process_tree
parameters:
  - name: node
execute:
  - do: "Process current node: {node}"
  - if: node.has_children()
    then:
      - for: child in node.children
        do: TREE.process_tree(child)  # –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤
```

---

## –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –ü—Ä–∏–Ω—Ü–∏–ø—ã

1. **–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –¥–ª—è –ø–∞–∫–µ—Ç–∞** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã
2. **–ó–∞–∫—Ä—ã—Ç–æ—Å—Ç—å –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏** - —è–¥—Ä–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
3. **–ö–æ–º–ø–æ–∑–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø–∞–∫–µ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ
4. **–ò–∑–æ–ª—è—Ü–∏—è** - –ø–∞–∫–µ—Ç–∞ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)

### –¢–æ—á–∫–∏ –ø–∞–∫–µ—Ç–∞

1. **–ù–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç–∞
2. **–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã** - –ø–∞–∫–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤
3. **–°–æ–±—ã—Ç–∏—è** - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —Ä–µ–∞–∫—Ü–∏–∏
4. **–ü–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö workflow-—Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
5. **DSL** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–≤

---

**–°–º. —Ç–∞–∫–∂–µ:**
- [../concepts.md](../concepts.md) - –û–±–∑–æ—Ä –∏ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤
- [core.md](core.md) - –ö–æ–Ω—Ü–µ–ø—Ç—ã —è–¥—Ä–∞
- [extensions.md](extensions.md) - –ö–æ–Ω—Ü–µ–ø—Ç—ã –ø–∞–∫–µ—Ç–æ–≤
- [mvp-decisions.md](mvp-decisions.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è MVP

