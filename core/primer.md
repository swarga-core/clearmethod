# ClearMethod Core Primer

> **–î–ª—è –ò–ò-–∞–≥–µ–Ω—Ç–∞**: –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —è–¥—Ä–µ ClearMethod

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ ClearMethod?

**ClearMethod** - –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Ä–∞–±–æ—Ç—ã —Å –ò–ò-–∞–≥–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ workflows –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è**: –ê–≥–µ–Ω—Ç –∏—Å–ø–æ–ª–Ω—è–µ—Ç YAML-–æ–ø–∏—Å–∞–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤, —Å–ª–µ–¥—É—è workflows —Å–æ—Å—Ç–æ—è–Ω–∏–π.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ß–µ—Ç—ã—Ä–µ –±–∞–∑–æ–≤—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ç–∞ —è–¥—Ä–∞

1. **TASK** - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –∑–∞–¥–∞—á–∏
   - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ workflow
   - –•—Ä–∞–Ω–∏—Ç —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –∏—Å—Ç–æ—Ä–∏—é

2. **WORKFLOW** - –≥—Ä–∞—Ñ —Å–æ—Å—Ç–æ—è–Ω–∏–π
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –∑–∞–¥–∞—á–∏
   - –ö–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ = –Ω–∞–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏–π
   - –ü–µ—Ä–µ—Ö–æ–¥—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º

3. **CONTEXT** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
   - Prime - –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
   - Load - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã

4. **EVENT** - —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
   - –ú–µ–∂–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
   - –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
   - –ò—Å—Ç–æ—Ä–∏—è –∏ –∞—É–¥–∏—Ç

### –ú–æ–¥–µ–ª—å: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ + –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **Core** (—è–¥—Ä–æ) = –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
- **Extensions** (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è) = –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä**:
- `TASK` (core) - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `FILE_TASK` (package) - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã

---

## –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ü–µ–ø—Ç–∞–º–∏ (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)

### –†–µ–∑–æ–ª–≤–∏–Ω–≥ –º–µ—Ç–æ–¥–æ–≤ –∫–æ–Ω—Ü–µ–ø—Ç–æ–≤

–ö–æ–≥–¥–∞ —Ç—ã –≤–∏–¥–∏—à—å –≤—ã–∑–æ–≤ –∫–æ–Ω—Ü–µ–ø—Ç–∞ –≤ CML:
```yaml
- TASK.set_property(task_id, "status", "active")
```

**–í–°–ï–ì–î–ê –≤—ã–ø–æ–ª–Ω—è–π —Å–ª–µ–¥—É—é—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º:**

#### –®–∞–≥ 1: –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–∑–æ–≤–∞
```
TASK.set_property(task_id, "status", "active")
  ‚Üì
–ö–æ–Ω—Ü–µ–ø—Ç: TASK
–ú–µ—Ç–æ–¥: set_property
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: [task_id, "status", "active"]
```

#### –®–∞–≥ 2: –†–µ–∑–æ–ª–≤–∏–Ω–≥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–ß–∏—Ç–∞–π `.cm/project.yml` ‚Üí —Å–µ–∫—Ü–∏—è `concept_implementations`:
```yaml
concept_implementations:
  TASK: file-task.FILE_TASK
  WORKFLOW: sbd.SBD_WORKFLOW
```

–ò–∑ `TASK` ‚Üí `file-task.FILE_TASK`:
- Extension ID: `file-task`
- Concept name: `FILE_TASK`

#### –®–∞–≥ 3: –ü–æ–∏—Å–∫ –º–µ—Ç–æ–¥–∞
1. –û—Ç–∫—Ä–æ–π `.cm/packages/file-task/concept.yml`
2. –ù–∞–π–¥–∏ —Å–µ–∫—Ü–∏—é `methods`:
```yaml
methods:
  set_property: methods/set_property.yml
```
3. –ü–æ—Å—Ç—Ä–æ–π –ø–æ–ª–Ω—ã–π –ø—É—Ç—å: `.cm/packages/file-task/methods/set_property.yml`

#### –®–∞–≥ 4: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
1. –ü—Ä–æ—á–∏—Ç–∞–π `.cm/packages/file-task/methods/set_property.yml`
2. –≠—Ç–æ CML-—Ñ–∞–π–ª —Å —Å–µ–∫—Ü–∏–µ–π `execute:`
3. –í—ã–ø–æ–ª–Ω–∏ –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ `execute:`, –ø–æ–¥—Å—Ç–∞–≤–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞

**–í—ã–∑–æ–≤ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏:**
```yaml
execute:
  - TASK.log(task_id, "Analysis started")
```

**–¢–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è:**
```
1. –ü–∞—Ä—Å–∏–Ω–≥: TASK.log(task_id, "Analysis started")
   ‚Üí –ö–æ–Ω—Ü–µ–ø—Ç: TASK
   ‚Üí –ú–µ—Ç–æ–¥: log
   ‚Üí –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: [task_id, "Analysis started"]

2. –ß–∏—Ç–∞—é .cm/project.yml
   ‚Üí concept_implementations.TASK = "file-task.FILE_TASK"
   
3. –ß–∏—Ç–∞—é .cm/packages/file-task/concept.yml
   ‚Üí methods.log = "methods/log.yml"
   
4. –ß–∏—Ç–∞—é .cm/packages/file-task/methods/log.yml
   ‚Üí –ù–∞—à–µ–ª execute:
     - let: log_line = "[{current_datetime()}] {entry}"
     - append: "{log_line}\n" to: ".cm/tasks/{task_id}/log.md"
   
5. –í—ã–ø–æ–ª–Ω—è—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –ø–æ–¥—Å—Ç–∞–≤–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - task_id = task_id (–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
   - entry = "Analysis started"
   
6. –†–µ–∑—É–ª—å—Ç–∞—Ç: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –≤ .cm/tasks/TASK-123/log.md
```

### –í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –Ω–∞–ø—Ä—è–º—É—é FILE_TASK**
   - ‚ùå `FILE_TASK.set_property(...)` 
   - ‚úÖ `TASK.set_property(...)`
   - –í—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é!

2. **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ —á–µ—Ä–µ–∑ project.yml**
   - –ù–µ —É–≥–∞–¥—ã–≤–∞–π –∫–∞–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
   - –°–º–æ—Ç—Ä–∏ –≤ –º–∞–ø–ø–∏–Ω–≥

3. **–ï—Å–ª–∏ –∫–æ–Ω—Ü–µ–ø—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –º–∞–ø–ø–∏–Ω–≥–µ**
   - –°–æ–æ–±—â–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: "–ö–æ–Ω—Ü–µ–ø—Ç X –Ω–µ –∏–º–µ–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"
   - –ü—Ä–µ–¥–ª–æ–∂–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å project.yml

4. **–ï—Å–ª–∏ –º–µ—Ç–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**
   - –°–æ–æ–±—â–∏: "–ú–µ—Ç–æ–¥ X.Y –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Z"
   - –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–∞–≥ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏

### –ü—Ä–∏–º–µ—Ä project.yml

```yaml
project:
  name: "My Project"
  version: "1.0.0"

packages:
  - file-task
  - sbd

concept_implementations:
  TASK: file-task.FILE_TASK
  WORKFLOW: sbd.SBD_WORKFLOW
  CONTEXT: core.CONTEXT
  EVENT: basic-events.BASIC_EVENT
```

---

## –†–∞–±–æ—Ç–∞ —Å —Å–æ–±—ã—Ç–∏—è–º–∏ (Events)

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏—è?

–°–æ–±—ã—Ç–∏—è - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –º–µ–∂–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑ –ø—Ä—è–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –≠–º–∏—Å—Å–∏—è —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –≤–∞–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö
- –ü–æ–¥–ø–∏—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–∞ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —É—Å–ª–æ–≤–∏—è–º
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π (–∞—É–¥–∏—Ç)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –≠–º–∏—Å—Å–∏—è —Å–æ–±—ã—Ç–∏–π –≤ CML

```yaml
# –í workflow state –∏–ª–∏ –º–µ—Ç–æ–¥–µ
- EVENT.emit("task.created", {
    task_id: task_id,
    workflow: "sbd.feature",
    title: "New feature"
  })

# –° –∑–∞—Ö–≤–∞—Ç–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- let: result = EVENT.emit("task.stage_completed", {
    task_id: task_id,
    stage: "designing"
  })
- info: "Triggered {result.handlers_executed} handlers"
```

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

**–ó–∞–¥–∞—á–∏:**
- `task.created`, `task.updated`, `task.deleted`
- `task.state_changed`, `task.stage_started`, `task.stage_completed`
- `task.workflow_started`, `task.workflow_completed`

**–ö–∞—á–µ—Å—Ç–≤–æ:**
- `quality.gate_checked`, `quality.gate_passed`, `quality.gate_failed`

**VCS:**
- `vcs.branch_created`, `vcs.commit_created`, `vcs.pr_created`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
- `context.loaded`, `context.updated`, `context.file_added`

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ - —ç—Ç–æ CML-—Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å–æ–±—ã—Ç–∏–∏:

**–ü—É—Ç—å:** `.cm/packages/{package}/handlers/{handler_name}.yml`

**–ü—Ä–∏–º–µ—Ä:**
```yaml
# .cm/packages/git-vcs/handlers/on_task_created.yml
name: on_task_created
params:
  - name: event
  - name: payload

instructions:
  - let: branch_name = "feature/{payload.task_id}"
  - VCS.create_branch(payload.task_id, branch_name)
  - TASK.log(payload.task_id, "Branch created: {branch_name}")
```

### –ü–æ–¥–ø–∏—Å–∫–∏

–ü–æ–¥–ø–∏—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ `.cm/events/subscriptions.yml`:

```yaml
subscriptions:
  - id: sub-001
    event_type: task.created
    package: git-vcs
    handler: handlers/on_task_created
    filter:
      workflow: sbd.feature
    priority: 20
    enabled: true
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
- –ú–µ–Ω—å—à–µ–µ —á–∏—Å–ª–æ = –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞–Ω—å—à–µ)
- 1-10: –∫—Ä–∏—Ç–∏—á–Ω—ã–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- 11-50: –ø—Ä–µ-–¥–µ–π—Å—Ç–≤–∏—è (quality gates)
- 51-100: –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
- 101+: –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

### –§–∏–ª—å—Ç—Ä—ã

–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

```yaml
# –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ workflow
filter:
  workflow: sbd.feature

# –¢–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å—Ç–∞–¥–∏–π
filter:
  stage: [designing, implementing]
```

### –ö–∞—Å–∫–∞–¥—ã —Å–æ–±—ã—Ç–∏–π

–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —ç–º–∏—Ç–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:

```yaml
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
- VCS.create_branch(...)
- EVENT.emit("vcs.branch_created", {...})  # ‚Üê –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ

# –≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –¥—Ä—É–≥–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
```

**–ó–∞—â–∏—Ç–∞:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –∫–∞—Å–∫–∞–¥–∞ = 10 —É—Ä–æ–≤–Ω–µ–π

### –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `.cm/events/events.yml`:

```yaml
- id: evt-001
  type: task.created
  timestamp: 2025-11-25T10:30:00Z
  payload:
    task_id: FEAT-001
    workflow: sbd.feature
  handlers_executed:
    - package: git-vcs
      handler: handlers/on_task_created
      status: success
      duration_ms: 156
  duration_ms: 1234
```

**–ó–∞–ø—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏:**
```yaml
# –í—Å–µ —Å–æ–±—ã—Ç–∏—è –∑–∞–¥–∞—á–∏
- let: events = EVENT.get_history(task_id: "FEAT-001")

# –°–æ–±—ã—Ç–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
- let: events = EVENT.get_history(event_type: "task.stage_completed", limit: 10)
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π —Å–æ–±—ã—Ç–∏—è –¥–ª—è:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- –ó–Ω–∞—á–∏–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–∫–æ–º–º–∏—Ç, PR, –¥–µ–ø–ª–æ–π)
- –¢–æ—á–µ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (VCS, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
- Quality gates –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Å–æ–±—ã—Ç–∏—è –¥–ª—è:**
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —à–∞–≥–æ–≤ –ª–æ–≥–∏–∫–∏
- –ß–∞—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–∫–∞–∂–¥–æ–µ —á—Ç–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞)
- –ü—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Ç–ª–∞–¥–∫–∞ —Å–æ–±—ã—Ç–∏–π

```yaml
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
- let: recent = EVENT.get_history(limit: 20)
- for: event in recent
  do:
    - info: "{event.type} ‚Üí {event.handlers_executed.length} handlers"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏
- let: subs = EVENT.list_subscriptions(event_type: "task.created")
- for: sub in subs
  do:
    - info: "  {sub.package}.{sub.handler} (priority: {sub.priority})"
```

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### 1. –ö–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
/cm-prime           # –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
/cm-start <workflow> <task_id>  # –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å workflow
/cm-next            # –°–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
/cm-status          # –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
```

### 2. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

**–ü—Ä–∏–º–µ—Ä**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
```
/cm-start psd.feature TASK-123
```

**–ê–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç**:
1. –ß–∏—Ç–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/core/commands/start.md`
2. –ö–æ–º–∞–Ω–¥–∞ –≥–æ–≤–æ—Ä–∏—Ç: –≤—ã–∑–≤–∞—Ç—å `WORKFLOW.start(task_id)`
3. –ê–≥–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç, —á—Ç–æ `WORKFLOW` - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è
4. –°–º–æ—Ç—Ä–∏—Ç –≤ `config.yml` - –∫–∞–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞
5. –ù–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `psd.feature`)
6. –ß–∏—Ç–∞–µ—Ç `packages/psd/workflows/feature/workflow.yml`
7. –í—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### 3. –°–æ—Å—Ç–æ—è–Ω–∏—è workflow

–ö–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - YAML —Ñ–∞–π–ª:
```yaml
status: designing
preconditions:
  - TASK.get_property("requirements_clear") == true
execute:
  - do: "Analyze requirements"
  - do: "Create design.md"
  - do: TASK.set_property("design_approved", true)
postconditions:
  - file_exists("design.md")
```

### 4. –ò–∑–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

**–í–ê–ñ–ù–û**: –°–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ!

‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```yaml
preconditions:
  - previous_state == "analyzing"
```

‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```yaml
preconditions:
  - TASK.get_property("analysis_completed") == true
```

**–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞ –∑–∞–¥–∞—á–∏**, –∞ –Ω–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É –¥—Ä—É–≥–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π.

---

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (Extensions)

### –ê–∫—Ç–∏–≤–Ω—ã–µ –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ

<!-- –≠—Ç–∞ —Å–µ–∫—Ü–∏—è –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ setup –Ω–∞ –æ—Å–Ω–æ–≤–µ config.yml -->

**FILE_TASK** - —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–¥–∞—á
- –†–µ–∞–ª–∏–∑—É–µ—Ç `TASK`
- –ó–∞–¥–∞—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.cm/tasks/`

**PSD** - Project Software Development
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç workflows –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Feature workflow (6 —Å–æ—Å—Ç–æ—è–Ω–∏–π)

---

## –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### –î–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤

1. **–ß–∏—Ç–∞–π YAML –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ** - –∫–∞–∂–¥–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤–∞–∂–Ω–∞
2. **–ü—Ä–æ–≤–µ—Ä—è–π preconditions** - –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
3. **–ü—Ä–æ–≤–µ—Ä—è–π postconditions** - –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
4. **–õ–æ–≥–∏—Ä—É–π –¥–µ–π—Å—Ç–≤–∏—è** - –≤—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π `TASK.log()`
5. **–°–æ–æ–±—â–∞–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö** - –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫

### –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏

1. **–û–¥–Ω–∞ –∑–∞–¥–∞—á–∞ = –æ–¥–∏–Ω workflow** - –Ω–µ —Å–º–µ—à–∏–≤–∞–π
2. **–°–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞
3. **–í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –ø–∞–ø–∫–µ –∑–∞–¥–∞—á–∏** - `.cm/tasks/TASK-XXX/`
4. **–ò—Å—Ç–æ—Ä–∏—è –≤ log.md** - –≤—Å—ë –∑–∞–ø–∏—Å—ã–≤–∞–π

### –î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

1. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –æ–±—ä—è—Å–Ω—è–π —á—Ç–æ –¥–µ–ª–∞–µ—à—å
2. **–ó–∞–ø—Ä–∞—à–∏–≤–∞–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** - –¥–ª—è –≤–∞–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
3. **–°–æ–æ–±—â–∞–π –æ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö** - "–ü–µ—Ä–µ—à–µ–ª –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ X"
4. **–ü—Ä–µ–¥–ª–∞–≥–∞–π –≤–∞—Ä–∏–∞–Ω—Ç—ã** - –µ—Å–ª–∏ –µ—Å—Ç—å –≤—ã–±–æ—Ä

---

## –¢–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–±–æ—Ç—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /cm-prime
   ‚Üí –ê–≥–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (—ç—Ç–æ—Ç —Ñ–∞–π–ª + –¥—Ä—É–≥–∏–µ primers)

2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /cm-start psd.feature TASK-123
   ‚Üí WORKFLOW.start("TASK-123")
   ‚Üí TASK.create("TASK-123", ..., "psd.feature")
   ‚Üí –ó–∞–¥–∞—á–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (creating)
   ‚Üí –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è creating.yml

3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /cm-next
   ‚Üí WORKFLOW.next("TASK-123")
   ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ postconditions —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   ‚Üí –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é (analyzing)
   ‚Üí –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è analyzing.yml

4. ... —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è ...

5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /cm-next (–≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏)
   ‚Üí –ó–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
   ‚Üí WORKFLOW.finalize("TASK-123")
```

---

## CML - —è–∑—ã–∫ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```yaml
execute:
  # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  - let: variable = "value"
  
  # –ü—Ä–æ—Å—Ç—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–±–µ–∑ do:)
  - "Natural language instruction"
  - CONCEPT.method(params)
  - info: "message"
  
  # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞
  - group: "Group title"
    do:
      - "Action 1"
      - "Action 2"
  
  # –£—Å–ª–æ–≤–∏—è
  - if: condition
    then:
      - "action"
    else:
      - "alternative"
  
  # –¶–∏–∫–ª—ã
  - for: item in collection
    do:
      - "process {item}"
  
  - while: condition
    max_iterations: 100
    do:
      - "action"
```

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

–¢—ã - –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä CML. –í—ã–ø–æ–ª–Ω—è–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- `let:` - –æ–±—ä—è–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
- `"text"` - –≤—ã–ø–æ–ª–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ
- `CONCEPT.method()` - –≤—ã–∑–æ–≤–∏ –º–µ—Ç–æ–¥ –∫–æ–Ω—Ü–µ–ø—Ç–∞
- `group:` + `do:` - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ (–≤—ã–ø–æ–ª–Ω—è–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
- `if/then/else` - –ø—Ä–æ–≤–µ—Ä—å —É—Å–ª–æ–≤–∏–µ
- `for/while` + `do:` - —Ü–∏–∫–ª
- `info/warn/error:` - —Å–æ–æ–±—â–µ–Ω–∏–µ
- `ask:` - –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `validate:` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø—Ä–∏ –æ—à–∏–±–∫–µ
- `return:` - –≤—ã—Ö–æ–¥ –∏–∑ –±–ª–æ–∫–∞

---

## –ì–¥–µ –∏—Å–∫–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?

**–í –ø—Ä–æ–µ–∫—Ç–µ** (–ø–æ—Å–ª–µ setup):
- `.cm/config.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- `.cm/priming.yml` - —á—Ç–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–∏ prime
- `.cm/core/` - —è–¥—Ä–æ (–∫–æ–Ω—Ü–µ–ø—Ç—ã, –∫–æ–º–∞–Ω–¥—ã)
- `.cm/packages/` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- `.cm/context/` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
- `.cm/tasks/` - –∑–∞–¥–∞—á–∏

**–ö–æ–º–∞–Ω–¥—ã**:
- `.cm/core/commands/*.md` - –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

**–ú–µ—Ç–æ–¥—ã**:
- `.cm/packages/*/methods/*.yml` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–≤

**Workflows**:
- `.cm/packages/*/workflows/*/workflow.yml` - –≥—Ä–∞—Ñ workflow
- `.cm/packages/*/workflows/*/states/*.yml` - —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

## –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º

1. **Precondition –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** - —Å–æ–æ–±—â–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –Ω—É–∂–Ω–æ
2. **Postcondition –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ** - —Å–æ–æ–±—â–∏ –æ–± –æ—à–∏–±–∫–µ, –æ–ø–∏—à–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
3. **–ú–µ—Ç–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω** - –ø—Ä–æ–≤–µ—Ä—å, –∞–∫—Ç–∏–≤–Ω–æ –ª–∏ –Ω—É–∂–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
4. **–ù–µ—è—Å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è** - –ø–æ–ø—Ä–æ—Å–∏ —É—Ç–æ—á–Ω–∏—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

**–¢—ã –≥–æ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—Ç—å —Å ClearMethod!** üöÄ

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑–æ–≤–µ—Ç `/cm-start` –∏–ª–∏ –¥—Ä—É–≥—É—é –∫–æ–º–∞–Ω–¥—É.

